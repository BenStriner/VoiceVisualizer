<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
      <title>SlickGrid example: CompositeEditor</title>

      <link href="sidebar.css" rel="stylesheet">
      <link rel="stylesheet" href="slickfolder/slick.grid.css" type="text/css"/>
      <link rel="stylesheet" href="slickfolder/css/smoothness/jquery-ui-1.8.16.custom.css" type="text/css"/>
      <link rel="stylesheet" href="slickfolder/examples/examples.css" type="text/css"/>
      <link rel="stylesheet" href="slickfolder/controls/slick.columnpicker.css" type="text/css"/>

        <!-- JavaScript -->
      <script src="jquery-2.1.0.js"></script>
      <script type="text/javascript" src="jquery-1.8.0.min.js"></script>
      <script type="text/javascript" src="chroma.js"></script>
      <!-- scripts for grid -->
      <script src="slickfolder/lib/firebugx.js"></script>

      <script src="slickfolder/lib/jquery-1.7.min.js"></script>
      <script src="slickfolder/lib/jquery-ui-1.8.16.custom.min.js"></script>
      <script src="slickfolder/lib/jquery.event.drag-2.2.js"></script>
      <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>

      <script src="slickfolder/slick.core.js"></script>
      <script src="slickfolder/plugins/slick.cellrangeselector.js"></script>
      <script src="slickfolder/plugins/slick.cellselectionmodel.js"></script>
      <script src="slickfolder/slick.formatters.js"></script>
      <script src="slickfolder/slick.editors.js"></script>
      <script src="slickfolder/slick.grid.js"></script>
      <script src="slickfolder/slick.compositeeditor.js"></script>

      <style>
      .cell-title {
        font-weight: bold;
      }

      .cell-effort-driven {
        text-align: center;
      }

      .item-details-form {
        z-index: 10000;
        display: inline-block;
        border: 1px solid black;
        margin: 8px;
        padding: 10px;
        background: #efefef;
        -moz-box-shadow: 0px 0px 15px black;
        -webkit-box-shadow: 0px 0px 15px black;
        box-shadow: 0px 0px 15px black;

        position: absolute;
        top: 10px;
        left: 150px;
      }

      .item-details-form-buttons {
        float: right;
      }

      .item-details-label {
        margin-left: 10px;
        margin-top: 20px;
        display: block;
        font-weight: bold;
      }

      .item-details-editor-container {
        width: 200px;
        height: 20px;
        border: 1px solid silver;
        background: white;
        display: block;
        margin: 10px;
        margin-top: 4px;
        padding: 0;
        padding-left: 4px;
        padding-right: 4px;
      }
    </style>

    </head>

    <body>
        <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand"><a href="#">Home</a>
                </li>
                <li><a href="#">Warmups</a>
                </li>
                <li><a href="#">Learn and Review</a>
                </li>
                <li><a href="#">Sheet Music</a>
                </li>
                <li><a href="#">Notebook</a>
                </li>
                <li><a href="#">Settings</a>
                </li>
            </ul>
        </div>

        <!-- Page content -->
        <div id="page-content-wrapper">
            <div class="content-header">
                <h1>
                    <a id="menu-toggle" href="#" class="btn btn-default"><i class="icon-reorder"></i></a>
                    Spectrograph
                </h1>
            </div>
            <!-- Keep all page content within the page-content inset div! -->
            <div class="page-content inset">
                <div class="row">
                    <div class="col-md-12">
                        <p class="lead">

                            <table style="width:800px">
                            <tr>
                          
                              <td> <div id = "reference">
                                <p id = "name">Reference Recording</p>
                                <div id = "button_canvas_ref">
                                    <input type="file" accept="audio/*">
                                        <button id = "ref1" onclick="play()" disabled>Start</button>
                                        <button id = "ref2" onclick="pause()" disabled>pause</button>
                                        <button id = "ref3" onclick="stop()" disabled>Stop</button>
                                        <br><br>
                                        <canvas id="canvas_refe" width="800" height="512" style="display: block; background-color: black ;"></canvas>
                                </div></td>       
                              </tr>
                            <tr>
                        
                              <td><div id = "user">
                                <p id = "name">User Recording</p>
                                <div id = "button_canvas_usr">
                                    <input type="file" accept="audio/*">
                                        <button id = "usr1" onclick="play()" disabled>Start</button>
                                        <button id = "usr2" onclick="pause()" disabled>pause</button>
                                        <button id = "usr3" onclick="stop()" disabled>Stop</button>
                                        <br><br>
                                        <canvas id="canvas_usr" width="800" height="512" style="display: block; background-color: black ;"></canvas>
                                </div></td>        
                            </tr>
                            <tr>
                             
                              <td>
                                
                                <canvas id="myCanvas" width="800" height="80" style="border:1px solid #d3d3d3;">
                               </canvas>

                            <script>
                                var img = new Image();
                                img.src = "staff.png";
                                img.onload=function(){
                                    var c=document.getElementById("myCanvas");
                                  var ctx=c.getContext("2d");
                                  ctx.drawImage(img,0,0,500,60);
                                };

                                var c=document.getElementById('myCanvas');
                                var ctx=c.getContext('2d');
                                ctx.fillStyle='#000000';
                                ctx.fillRect(20,20,10,10);
                              </script>

                              </td>        
                            </tr>
                            </table>
                            <br>

                            <div style="position:relative">
                              <div style="width:800px;">
                                <div id="myGrid" style="width:100%;height:200px;"></div>
                              </div>
                            </div>

                            <script id="itemDetailsTemplate" type="text/x-jquery-tmpl">
                              <div class='item-details-form'>
                                {{each columns}}
                                <div class='item-details-label'>
                                  ${name}
                                </div>
                                <div class='item-details-editor-container' data-editorid='${id}'></div>
                                {{/each}}

                                <hr/>
                                <div class='item-details-form-buttons'>
                                  <button data-action='save'>Save</button>
                                  <button data-action='cancel'>Cancel</button>
                                </div>
                              </div>
                            </script>

                            <p> ^ above is where the grid to choose songs will be. it can show now. next step is to connect the choice  with the graph.  </p>



                    </div>
              
                </div>
            </div>
        </div>

    </div>


    <!-- Custom JavaScript for the Menu Toggle -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("active");
    });
    </script>
    <script src="audio.js"></script>

<!-- scripts for grid -->
    <script>
  function requiredFieldValidator(value) {
    if (value == null || value == undefined || !value.length) {
      return {valid: false, msg: "This is a required field"};
    } else {
      return {valid: true, msg: null};
    }
  }

  var grid;
  var data = [];
  var columns = [];

columns = [

    {id: "Graph", name: "Graph", field: "Graph", width: 100, cssClass: "cell-effort-driven", field: "Graph", formatter: Slick.Formatters.Checkmark, editor: Slick.Editors.Checkbox},
    {id: "Recording List", name: "Recording List", field: "Recording List", width: 300, editor: Slick.Editors.Text, validator: requiredFieldValidator},
    {id: "Created Time", name: "Created Time", field: "Created Time", width: 300, editor: Slick.Editors.Date},
    {id: "Set Reference", name: "Set Reference", width: 100, minWidth: 20, maxWidth: 100, cssClass: "cell-effort-driven", field: "effortDriven", formatter: Slick.Formatters.Checkmark, editor: Slick.Editors.Checkbox}
  ];


  var options = {
    editable: true,
    enableAddRow: true,
    enableCellNavigation: true,
    asyncEditorLoading: false,
    autoEdit: false
  };


  function openDetails() {
    if (grid.getEditorLock().isActive() && !grid.getEditorLock().commitCurrentEdit()) {
      return;
    }

    var $modal = $("<div class='item-details-form'></div>");

    $modal = $("#itemDetailsTemplate")
        .tmpl({
          context: grid.getDataItem(grid.getActiveCell().row),
          columns: columns
        })
        .appendTo("body");

    $modal.keydown(function (e) {
      if (e.which == $.ui.keyCode.ENTER) {
        grid.getEditController().commitCurrentEdit();
        e.stopPropagation();
        e.preventDefault();
      } else if (e.which == $.ui.keyCode.ESCAPE) {
        grid.getEditController().cancelCurrentEdit();
        e.stopPropagation();
        e.preventDefault();
      }
    });

    $modal.find("[data-action=save]").click(function () {
      grid.getEditController().commitCurrentEdit();
    });

    $modal.find("[data-action=cancel]").click(function () {
      grid.getEditController().cancelCurrentEdit();
    });


    var containers = $.map(columns, function (c) {
      return $modal.find("[data-editorid=" + c.id + "]");
    });

    var compositeEditor = new Slick.CompositeEditor(
        columns,
        containers,
        {
          destroy: function () {
            $modal.remove();
          }
        }
    );

    grid.editActiveCell(compositeEditor);
  }

  $(function () {
    for (var i = 0; i <10; i++) {
      var d = (data[i] = {});
      d["Graph"] = (i==0 || i ==1);
      d["Recording List"] = "Recording " + (i+1);
      d["Created Time"] = "01/" + (10-i) +"/2013";
      d["effortDriven"] = (i  == 0);
    }

    grid = new Slick.Grid("#myGrid", data, columns, options);

    grid.onAddNewRow.subscribe(function (e, args) {
      var item = args.item;
      var column = args.column;
      grid.invalidateRow(data.length);
      data.push(item);
      grid.updateRowCount();
      grid.render();
    });


    grid.onValidationError.subscribe(function (e, args) {
      // handle validation errors originating from the CompositeEditor
      if (args.editor && (args.editor instanceof Slick.CompositeEditor)) {
        var err;
        var idx = args.validationResults.errors.length;
        while (idx--) {
          err = args.validationResults.errors[idx];
          $(err.container).stop(true, true).effect("highlight", {color: "red"});
        }
      }
    });

    grid.setActiveCell(0, 0);
  })
</script>



    </body>
</html>